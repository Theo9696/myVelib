package myVelib;

import java.util.ArrayList;

public class Simulation {
	
	public final String[] ListOfNameBasic = {"Patrick", "Jean-Louis","Baptiste", "Victor", "Emile","Louise",
			"Camille", "Hajar", "Leïla", "Sarah", "Wiam", "Théo", "Lucas", "Paul", "Anna", "Mahaut", "Odelin", "Morgan", "Paloma"};
	
	public static ArrayList<String> ListOfName = new ArrayList<String>();
	
	public void createAMap(int numberOfStations, int numberOfUsers, int lengthOfMap) {
		
		ArrayList<Station> stations = new ArrayList<Station>();
		ArrayList<Bicycle> bicycles = new ArrayList<Bicycle>();
		ArrayList<ParkingSlot> slots = new ArrayList<ParkingSlot>();
		
		for (int k = 0; k < numberOfBicycles; k++) {
			bicycles.add(newBicycle());
		}
		
		Bicycle b = new ElectricalBicycle();
		Bicycle b2 = new ElectricalBicycle();
		Bicycle b3 = new MechanicalBicycle();
		Bicycle b4 = new ElectricalBicycle();
		Bicycle b5 = new ElectricalBicycle();
		Bicycle b6 = new MechanicalBicycle();
		Bicycle b7 = new MechanicalBicycle();
		Bicycle b8 = new ElectricalBicycle();
		ParkingSlot p1 = new ParkingSlot();
		ParkingSlot p2 = new ParkingSlot();
		ParkingSlot p3 = new ParkingSlot();
		ParkingSlot p4 = new ParkingSlot();
		ParkingSlot p5 = new ParkingSlot();
		ParkingSlot p6 = new ParkingSlot();
		ParkingSlot p7 = new ParkingSlot();
		ParkingSlot p8 = new ParkingSlot();
		ParkingSlot p9 = new ParkingSlot();
		ParkingSlot p10 = new ParkingSlot();
		ParkingSlot p11 = new ParkingSlot();
		ParkingSlot p12 = new ParkingSlot();

		p1.addBicycle(b);
		p2.addBicycle(b2);
		p3.addBicycle(b3);
		p4.addBicycle(b4);
		p5.addBicycle(b5);
		p6.addBicycle(b6);
		p7.addBicycle(b7);
		p8.addBicycle(b8);
		ArrayList<ParkingSlot> parkingslot1 = new ArrayList<ParkingSlot>();
		ArrayList<ParkingSlot> parkingslot2 = new ArrayList<ParkingSlot>();
		ArrayList<ParkingSlot> parkingslot3 = new ArrayList<ParkingSlot>();
		ArrayList<ParkingSlot> parkingslot4 = new ArrayList<ParkingSlot>();
		
		parkingslot1.add(p1);
		parkingslot1.add(p2);
		parkingslot1.add(p9);
		parkingslot2.add(p3);
		parkingslot2.add(p4);
		parkingslot2.add(p10);
		parkingslot3.add(p5);
		parkingslot3.add(p6);
		parkingslot3.add(p11);
		parkingslot4.add(p7);
		parkingslot4.add(p8);
		parkingslot4.add(p12);
		
		Station station = new Station(parkingslot1, 1d, 1d);
		Station station2 = new Station(parkingslot2, 12d, 11d);
		Station station3 = new Station(parkingslot3, 5d, 5d);
		Station station4 = new Station(parkingslot4, 8d, 8d);
		System.out.println(station);
		
		ArrayList<Station> stations = new ArrayList<Station>();
		stations.add(station);
		stations.add(station2);
		stations.add(station3);
		stations.add(station4);
		System.out.println(stations);
		
		
		
		User mika = new User("Tanguy");
		System.out.println(mika);
		
		ComputingRide computingRide = new ComputingRide(mika, stations, 10, 10);
		System.out.println(computingRide);
		System.out.println(computingRide.computeWay());
		
	}
	
	private Bicycle newBicycle() {
		if (Math.random() < 0.3) {
			return new ElectricalBicycle();
		} else {
			return new MechanicalBicycle();
		}
	}
	
	private ParkingSlot newParkingSlot() {
		double proba = Math.random();
		try {
			if (proba < 0.5) {
				// The parkingSlot will either have a mechanical or a electrical car
				ParkingSlot ps = new ParkingSlot();
				ps.addBicycle(this.newBicycle()); 
				return ps ;
			} else if (proba >= 0.5 && proba<0.9 ) {
				// The parkingslot will be empty
				ParkingSlot ps = new ParkingSlot();
				return ps ;
			} else {
				//The parkingslot will be out of order
				ParkingSlot ps = new ParkingSlot();
				ps.setInOrder(false);
				return ps ;
			}
		} catch (ParkingSlotFullException e) {
			e.printStackTrace();
		}
		
		return new ParkingSlot();
	}
	
	private Station newStation(int lengthOfMap) {
		//need to be changed when station will include "plus" possibility
		int numberOfParkingSlot = (int) Math.ceil(50*Math.random());
		double latitude = Math.ceil(lengthOfMap*Math.random());
		double longitude = Math.ceil(lengthOfMap*Math.random());
		
		Station station = new Station(latitude, longitude);
		
		for (int k=0; k<numberOfParkingSlot; k++) {
			station.addParkingSlot(newParkingSlot());
		}
		
		return station;
	}
	
	private User newUser(int lengthOfMap) {
		double proba = Math.random();
		double latitude = Math.ceil(lengthOfMap*Math.random());
		double longitude = Math.ceil(lengthOfMap*Math.random());
		
		
		if (proba <0.5) {
			return new User()
		}
	}

}
